我将为您在 `me.shetj.base.tools.debug` 包下重新设计并实现一套高效的日志管理系统。

### 🏗 设计方案

1.  **核心架构 (`LogManager`)**：
    *   **异步缓冲**：使用 Kotlin Coroutines 的 `Channel` 作为日志缓冲区，实现“生产者-消费者”模型。
    *   **批量写入**：支持“缓冲区满（如 50 条）”或“时间间隔到达（如 5 秒）”时自动批量写入文件，大幅减少 IO 操作，提升性能。
    *   **生命周期安全**：使用单例 `CoroutineScope` 管理后台写入任务。

2.  **功能特性**：
    *   **多级别支持**：支持 `INFO`, `ERROR`, `HTTP`, `BEHAVIOR` (用户行为) 等多种日志类型。
    *   **灵活配置 (`LogConfig`)**：支持动态开关、自定义日志目录、缓冲大小、自动刷新间隔等。
    *   **文件策略**：按日期（天）分割日志文件，避免单个文件过大；提供文件清理机制（可选）。

3.  **Crash 异常捕获优化 (`BaseUncaughtExceptionHandler`)**：
    *   重构现有的 Crash 处理器。
    *   **关键改进**：在发生 Crash 时，**同步强制刷新**缓冲区，确保崩溃前的最后几条日志（包括崩溃堆栈）能完整写入文件，防止数据丢失。

4.  **兼容与重构 (`DebugFunc`)**：
    *   重构 `DebugFunc` 类，将其作为新系统的统一对外门面（Facade）。
    *   保留 `saveHttpToFile` 等旧 API 以保持兼容，但内部转发给 `LogManager`。
    *   新增 `logBehavior(tag, msg)` 等新 API。

### 📋 实施步骤

1.  **创建基础类**：
    *   `LogRecord.kt`: 定义日志实体（时间、Tag、内容、级别）。
    *   `LogConfig.kt`: 定义配置项（开关、路径、缓冲策略）。
2.  **实现核心逻辑**：
    *   `LogManager.kt`: 实现 Channel 接收、缓冲队列维护、IO 写入逻辑。
3.  **重构现有组件**：
    *   修改 `BaseUncaughtExceptionHandler.kt` 对接 `LogManager`。
    *   重构 `DebugFunc.kt` 为新系统的入口。
4.  **文档生成**：
    *   实现完成后，更新 `basekit-ktx` 的技能文档，添加该日志系统的使用说明。

### ⚠️ 注意事项
*   Crash 时的写入必须从异步切换为同步，否则进程退出会导致协程取消。
*   默认日志路径将保持在应用私有目录（`getExternalFilesDir`），确保卸载无残留。
